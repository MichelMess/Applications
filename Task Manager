import sys
# This bit of code opens a file for reading and creates 2 list variables.
credentials_file = open('user.txt', 'r+')
username_list = []
password_list = []
# This bit of code reads the lines of the file.
for line in credentials_file:
    chop = line.split()
    cut = line.split(",")
    username_list.append(cut[0])
    password_list.append(chop[1:])
    user_attach = ''.join(username_list)
    password_attach = ''.join(password_list[0])
# This bit of code creates a while loop to validate the user login credentials.
username_login = input("Enter your username: ").lower()
while username_login != user_attach:
    print("Please try again")
    username_login = input("Enter your username: ").lower()

if username_login == user_attach:
        print("Your username is correct: ", username_login)
else:
        print("Incorrect username", username_login)
        sys.exit()

password_login = input("Enter your password: ").lower()
while password_login != password_attach:
    print("Please try again")
    password_login = input("Enter your password: ").lower()

if password_login == password_attach:
        print("Your password is correct: ", password_login)
else:
        print("Incorrect username", password_login) 
        sys.exit()

credentials_file.close()

while True:
    menu = input('''Select one of the following Options below: 
r - Registering a user
a - Adding a task
va - View all tasks
vm - view my task
e - Exit
: ''').lower()

    if menu == 'r':
        pass
        # Username must be followed by a comma and space.
        new_username = input("Enter a new username: ").lower()
        new_password = input("Enter a new password: ").lower()
        confirmation_password = input("Confirm password: ").lower()
        # A file is open and a condition is met to verify the password.
        with open('user.txt', 'a') as user_document:
            if new_password == confirmation_password:
                user_document.write(new_username + " " + new_password)
            else:
                    print("Incorrect confirmation password: ", confirmation_password)
            user_document.close()

    elif menu == 'a':
        pass
        # This bit of code requests user tasks and must be written followed by a comma and space.
        task_username = input("Username of the person whom the task is assigned to: ").lower()
        task_title = input("Title of the task: ").lower()
        task_description = input("Description of the task: ").lower()
        task_due_date = input("Task due date: ").lower()
        task_current_date = input("Current date: ").lower()
        # A file is opened and writes the task information.
        with open('tasks.txt', 'a') as task_document:
            task_document.write("\n" + task_username + " " + task_title + " " + task_description + " " + task_due_date + " " + task_current_date + " " + "No")
            task_document.close()

    elif menu == 'va':
        pass
        # This bit of code opens a file for read and creates list variables.
        file = open('tasks.txt', 'r+', encoding='utf-8')
        username_register = []
        title_register = []
        description_register = []
        due_date_register = []
        current_date_register = []
        task_status_register = []
        task = []
        # This bit of code loops over lines inside a file.
        for line in file:
            chop = line.split(",")
            task.append(chop)

        for title in task:
                print("Task: \t\t", "  ", title[1])
                print("Assigned to: \t", title[0])
                print("Date assigned: ", title[3])
                print("Due date: \t", "  ", title[4])
                print("Task complete? ", title[5])
                print("Task description: \n", title[2])
        file.close()

    elif menu == 'vm':
        pass
        file = open('tasks.txt', 'r+', encoding='utf-8')
        task = []
        # This bit of code loops over lines inside file.
        for line in file:
            chop = line.split(",")
            task.append(chop)
        # This bit of code loops over a list and prints out only the login user tasks.
        for title in task:
            if username_login == title[0]:
                print("Task: \t\t", "  ", title[1])
                print("Assigned to: \t", title[0])
                print("Date assigned: ", title[3])
                print("Due date: \t", "  ", title[4])
                print("Task complete? ", title[5])
                print("Task description: \n", title[2])

        file.close()

    elif menu == 'e':
        print('Goodbye!!!')
        exit()

    else:
        print("You have made a wrong choice, Please Try again")
# Code ends here.
